---
title: "Data Catalog"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Data Catalog}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r}
#| echo: false
library(codec)

codec_data_installed <-
  fs::path_package("codec") |>
  fs::path("codec_data") |>
  fs::dir_ls() |>
  fs::path_file()
  
cd <-
  purrr::map(codec_data_installed, codec::codec_data, .progress = "reading codec data") |>
  purrr::set_names(codec_data_installed)
```


```{r}
#| echo: false
x <- cd[["tract_indices"]]
x <-
  x |>
  add_attrs(description = "A compilation of several open data products at the census tract level, including socioeconomic indices, environmental indices, and resource access indices")
```

## `r attr(x, "title")`

[``r attr(x, "name")``](`r attr(x, "homepage")`) (*v`r attr(x, "version")`*): `r attr(x, "description")`.

```{r}
#| echo: false

downloadthis::download_dir(
  path = fs::path_package("codec", "codec_data", attr(x, "name")),
  output_name = attr(x, "name"),
  button_label = "Download",
  button_type = "success",
  has_icon = TRUE,
  icon = "fa fa-download",
  self_contained = TRUE
)

```

```{r}
#| eval: false
codec::codec_data("tract_indices")

```

### Metadata

```{r}
#| echo: false
glimpse_schema(x) |>
  DT::datatable(rownames = FALSE,
                options = list(
                  paging = FALSE,
                  dom = "ft",
                  searchHighlight = TRUE,
                  scrollCollapse = TRUE,
                  scroller = TRUE,
                  scrollX = TRUE,
                  scrollY = "400px",
                  extensions = c("Scroller")))
```

### Data

```{r}
#| echo: false
x |>
  DT::datatable(rownames = FALSE,
                options = list(
                  paging = FALSE,
                  dom = "ft",
                  searchHighlight = TRUE,
                  scrollCollapse = TRUE,
                  scroller = TRUE,
                  scrollX = TRUE,
                  scrollY = "400px",
                  extensions = c("Scroller")))
```
```
